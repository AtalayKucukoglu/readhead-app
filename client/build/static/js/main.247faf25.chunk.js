(this.webpackJsonpreadhead=this.webpackJsonpreadhead||[]).push([[0],{116:function(e,t,a){},117:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),s=a(19),o=a.n(s),i=(a(116),a(15)),c=a(16),l=a(18),u=a(17),h=a(100),d=a(21),p=(a(117),a(102)),b=a(77),j=a(24),m=a(14),f=a.n(m),v=a(41),g=a(93),O=a(94),x=a(10),k=function(e,t){return console.log("login service called"),f.a.post("/users/login",{username:e,password:t}).then((function(e){return console.log("response: ",e),e?e.data:{}})).catch((function(e){return console.log(e)}))},y=function(e){return f.a.get("/users/check_token").then((function(e){return!(!e||!e.status)&&e.data})).catch((function(e){return console.log(e)}))},A="LOGIN_SUCCESS",N="LOGIN_ERROR",S="LOGOUT",C="An error occured. Please try again later.",w=function(e){return{type:A,user:e}},D=function(e){return{type:N,error:e}},_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!a||e||t?function(a){k(e,t).then((function(e){if(e)return e.status?(be(e.token),a(w(e.data))):a(D(e.message||C));a(D(C))})).catch((function(e){return a(D(e))}))}:function(e){y().then((function(t){return console.log("login action data: ",t),t&&t.status?e(w(t.data)):e(G())}))}},R=function(e){return function(t){(function(e){return f.a.post("/users/register",{username:e.username,email:e.email,password:e.password,birth_date:e.birthdate||null,gender:e.gender||null}).then((function(e){return console.log("response: ",e),e?e.data:{}})).catch((function(e){return console.log(e)}))})(e).then((function(e){if(console.log(e),e)return e.status?(be(e.token),t(w(e.data))):t(D(e.message||C));t(D(C))})).catch((function(e){return t(D(e))}))}},G=function(){return be(!1),{type:S}},T={user:"",isAuthenticated:!1,error:!1,errorMessage:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(x.a)(Object(x.a)({},e),{},{user:t.user,isAuthenticated:!0,error:!1,errorMessage:""});case N:return Object(x.a)(Object(x.a)({},e),{},{user:"",error:!0,isAuthenticated:!1,errorMessage:t.error});case S:return{user:""};default:return e}},M=a(7),B=a.n(M),P=a(13),E=function(e){return f.a.get("/users/"+e+"/favorites").then((function(e){if(e.data&&e.data.status)return e.data.data})).catch((function(e){return console.log(e)}))},I=function(e){return f.a.get("/users/"+e+"/have-read").then((function(e){if(e.data&&e.data.status)return e.data.data})).catch((function(e){return console.log(e)}))},U=function(e){return f.a.get("/users/"+e+"/to-read").then((function(e){if(e.data&&e.data.status)return e.data.data})).catch((function(e){return console.log(e)}))},Y=function(){var e=Object(P.a)(B.a.mark((function e(t){var a,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return a=e.sent,e.next=5,U(t);case 5:return n=e.sent,e.next=8,I(t);case 8:return r=e.sent,e.abrupt("return",{favorites:a,toRead:n,haveRead:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t){return console.log(t),f.a.put("/users/"+e+"/update",{data:t}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))},Q=function(e,t){return console.log(t),f.a.put("/users/"+e+"/update",{data:t}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))},q="An error occured. Please try again later.",J="UPDATE_FAVORITES",V="UPDATE_HAVE_READ",W="UPDATE_TO_READ",H="UPDATE_ALL_LISTS",Z=J,z=V,K=W,X=H,$={UPDATE_FAVORITES:"favorites",UPDATE_TO_READ:"to-read",UPDATE_HAVE_READ:"have-read"},ee=function(e,t){return{type:t,payload:e}},te=function(e){return e.favorites||(e.favorites=[]),e.haveRead||(e.haveRead=[]),e.toRead||(e.toRead=[]),{type:X,payload:e}},ae=function(e){return{type:"UPDATE_LIST_ERROR",error:e}},ne=function(e,t,a){return function(n){(function(e,t,a){return f.a.post("/users/"+e+"/"+a,{book_id:t}).then((function(e){return e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))})(e,t,$[a]).then(function(){var t=Object(P.a)(B.a.mark((function t(r){var s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=3;break}return n(ae(q)),t.abrupt("return");case 3:if(r.status){t.next=5;break}return t.abrupt("return",n(ae(r.message||q)));case 5:s=[],t.t0=a,t.next=t.t0===Z?9:t.t0===K?13:t.t0===z?17:21;break;case 9:return t.next=11,E(e);case 11:return s=t.sent,t.abrupt("break",22);case 13:return t.next=15,U(e);case 15:return s=t.sent,t.abrupt("break",22);case 17:return t.next=19,I(e);case 19:return s=t.sent,t.abrupt("break",22);case 21:return t.abrupt("return",n(ae(q)));case 22:return t.abrupt("return",n(ee(s,a)));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return n(ae(e))}))}},re=function(e,t,a){return function(n){(function(e,t,a){return f.a.delete("/users/"+e+"/"+a,{data:{book_id:t}}).then((function(e){return e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))})(e,t,$[a]).then(function(){var t=Object(P.a)(B.a.mark((function t(r){var s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=3;break}return n(ae(q)),t.abrupt("return");case 3:if(r.status){t.next=5;break}return t.abrupt("return",n(ae(r.message||q)));case 5:s=[],t.t0=a,t.next=t.t0===Z?9:t.t0===K?13:t.t0===z?17:21;break;case 9:return t.next=11,E(e);case 11:return s=t.sent,t.abrupt("break",22);case 13:return t.next=15,U(e);case 15:return s=t.sent,t.abrupt("break",22);case 17:return t.next=19,I(e);case 19:return s=t.sent,t.abrupt("break",22);case 21:return t.abrupt("return",n(ae(q)));case 22:return t.abrupt("return",n(ee(s,a)));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return n(ae(e))}))}},se=J,oe=V,ie=W,ce=H,le={favorites:[],haveRead:[],toRead:[]},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(x.a)(Object(x.a)({},e),{},{favorites:t.payload});case ie:return Object(x.a)(Object(x.a)({},e),{},{toRead:t.payload});case oe:return Object(x.a)(Object(x.a)({},e),{},{haveRead:t.payload});case ce:return Object(x.a)(Object(x.a)({},e),{},{favorites:t.payload.favorites||[],haveRead:t.payload.haveRead||[],toRead:t.payload.toRead||[]});default:return e}},he=Object(v.c)({auth:L,lists:ue}),de=Object(O.createLogger)(),pe=Object(v.e)(he,Object(v.d)(Object(v.a)(g.a,de),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),be=function(e){if(e)return console.log("set auth token: ",e),f.a.defaults.headers.common.Authorization=e,void window.localStorage.setItem("readhead-jwtToken",e);delete f.a.defaults.headers.common.Authorization,window.localStorage.removeItem("readhead-jwtToken")},je=function(e){var t=e.auth,a=t.isAuthenticated,n=t.error,r=t.errorMessage,s=t.user,o=e.lists;return{isAuthenticated:a,error:n,errorMessage:r,user:s,favorites:o.favorites,toRead:o.toRead,haveRead:o.haveRead}},me=a.p+"static/media/profile_picture.75e00f76.jpg";function fe(e){var t={wrapper:{display:"flex",height:e.height||50,width:e.height?"auto":50,cursor:"pointer"},image:{objectFit:"cover",alignSelf:"center",height:"inherit",width:e.height?"auto":"100%",borderRadius:e.height||50}};return Object(n.jsx)("div",{style:t.wrapper,onClick:e.onClick||null,children:Object(n.jsx)("img",{style:t.image,src:e.src,alt:e.alt})})}var ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).goTo=function(t){return e.props.history.push(t)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.isAuthenticated,a=this.props.user.username;return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsxs)("div",{className:"flex-row ai-center",children:[Object(n.jsx)("img",{className:"header-logo",src:"data:image/png;base64,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",alt:"ReadHead Logo",onClick:function(){return e.goTo("/")}}),t?this.renderRouteItem("Logout","/login"):null,t?this.renderRouteItem("Search","/search"):null,t?null:this.renderRouteItem("Login","/login"),t?null:this.renderRouteItem("Register","/register")]}),t&&a?Object(n.jsx)(fe,{src:me,alt:"Profile",height:"80%",onClick:function(){return e.goTo("/users/"+a)}}):null]})}},{key:"renderRouteItem",value:function(e,t){var a=this;return Object(n.jsx)(p.a,{style:{padding:20},onClick:function(){return a.goTo(t)},children:Object(n.jsx)(b.a,{variant:"h6",style:{color:"#ffffff"},children:e})})}}]),a}(r.Component),ge=Object(j.b)(je)(ve),Oe=a(25),xe=a(179),ke=a(195),ye=a(184),Ae=a(185),Ne=a(198),Se=a(178);function Ce(e){var t=e.color||"#ffffff";return Object(n.jsx)(Se.a,{size:{sm:20,md:40}[e.size],style:{color:t}})}var we=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).isLoginFormFilled=function(){return n.state.username&&n.state.password},n.handleChange=function(e){n.setState(Object(Oe.a)({},e.target.name,e.target.value))},n.handleLogin=function(e){if(n.isLoginFormFilled()){e.preventDefault(),n.setState({isLoading:!0});var t=n.props.dispatch,a=n.state,r=a.username,s=a.password;console.log("before dispatch"),t(_(r,s)),console.log("after dispatch")}},n.responseReceived=function(){return n.props.isAuthenticated||n.props.error},n.state={isLoading:!1,username:"",password:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(G())}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.error,r=e.errorMessage,s=this.state.isLoading;return t&&this.props.history.push("/users/"+this.props.user.username),this.responseReceived()&&s&&this.setState({isLoading:!1}),console.log(this.responseReceived(),s),Object(n.jsx)("div",{className:"page-container jc-center ai-center",children:Object(n.jsxs)(xe.a,{item:!0,className:"px-1 py-1",xs:8,s:6,md:6,lg:4,xl:3,children:[Object(n.jsx)(b.a,{variant:"h3",children:"Login"}),a?Object(n.jsx)(Ne.a,{severity:"error",children:r}):null,Object(n.jsxs)("form",{className:"flex-column my-1",children:[Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange})]}),Object(n.jsxs)("div",{className:"jc-center flex-column",children:[Object(n.jsx)(ye.a,{disabled:!this.isLoginFormFilled(),className:"mb-1",color:"primary",variant:"contained",onClick:this.handleLogin,children:this.state.isLoading?Object(n.jsx)(Ce,{size:"sm"}):"Login"}),Object(n.jsx)(Ae.a,{variant:"body1",href:"/register",children:"Not registered yet? Register now!"})]})]})})}}]),a}(r.Component),De=Object(j.b)(je)(we),_e=a(201),Re=["Male","Female"],Ge=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).isFormFilled=function(){return n.state.email&&n.state.username&&n.state.password},n.handleChange=function(e){n.setState(Object(Oe.a)({},e.target.name,e.target.value))},n.handleRegister=function(e){if(n.isFormFilled()){n.setState({isLoading:!0});var t=n.props.dispatch,a=Object(x.a)(Object(x.a)({},n.state),{},{isLoading:void 0});t(R(a))}},n.responseReceived=function(){return n.props.isAuthenticated||n.props.error},n.state={isLoading:!1,email:"",username:"",password:"",gender:"",birthdate:""},n}return Object(c.a)(a,[{key:"render",value:function(){return this.props.isAuthenticated&&this.props.user&&this.props.history.push("/users/"+this.props.user.username),Object(n.jsx)("div",{className:"page-container jc-center ai-center",children:Object(n.jsxs)(xe.a,{item:!0,className:"px-1 py-1",xs:8,s:6,md:6,lg:4,xl:3,children:[Object(n.jsx)(b.a,{variant:"h3",children:"Register"}),Object(n.jsxs)("form",{className:"flex-column my-1",children:[Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",select:!0,variant:"outlined",label:"Gender",type:"text",name:"gender",value:this.state.gender,onChange:this.handleChange,children:Re.map((function(e){return Object(n.jsx)(_e.a,{value:e,children:e},e)}))}),Object(n.jsx)(ke.a,{className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Birthdate",type:"date",name:"birthdate",value:this.state.birthdate,onChange:this.handleChange})]}),Object(n.jsxs)("div",{className:"jc-center flex-column",children:[Object(n.jsx)(ye.a,{disabled:!this.isFormFilled(),className:"mb-1",color:"primary",variant:"contained",onClick:this.handleRegister,children:this.state.isLoading?Object(n.jsx)(Ce,{size:"sm"}):"Register"}),Object(n.jsx)(Ae.a,{variant:"body1",href:"/login",children:"Already registered? Login here."})]})]})})}}]),a}(r.Component),Te=Object(j.b)(je)(Ge),Le=a(200),Me=a(186),Be=a(187),Pe=a(188),Ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleOpen=function(){e.props.onOpen()},e.handleClose=function(){e.props.onClose()},e.handleSave=function(){e.props.onSave()},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.isSaving,r=e.title,s=e.display,o=e.displayProps,i=e.displayText;return Object(n.jsxs)("div",{children:["button"===s?Object(n.jsx)(ye.a,{variant:"contained",color:"primary",onClick:this.handleOpen,children:i}):"link"===s?Object(n.jsx)(b.a,Object(x.a)(Object(x.a)({component:Ae.a},o),{},{children:i})):null,Object(n.jsxs)(Le.a,{open:t,onClose:this.handleClose,maxWidth:"md",children:[Object(n.jsx)(Me.a,{children:r}),Object(n.jsx)(Be.a,{children:this.props.children}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(ye.a,{onClick:this.handleSave,color:"primary",children:a?Object(n.jsx)(Ce,{size:"sm",color:"primary"}):"Save"}),Object(n.jsx)(ye.a,{onClick:this.handleClose,color:"primary",autoFocus:!0,children:"Cancel"})]})]})]})}}]),a}(r.Component),Ie=a(70),Ue=["Male","Female"],Ye={M:"Male",F:"Female"},Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).renderForm=function(){return Object(n.jsxs)("div",{className:"flex-column mx-1 px-1",style:{width:"90vw",maxWidth:"400px"},children:[Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Email",type:"email",name:"email",value:r.state.email,onChange:r.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",required:!0,variant:"outlined",label:"Username",type:"text",name:"username",value:r.state.username,onChange:r.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",select:!0,variant:"outlined",label:"Gender",type:"text",name:"gender",value:r.state.gender,onChange:r.handleChange,children:Ue.map((function(e){return Object(n.jsx)(_e.a,{value:e,children:e},e)}))}),Object(n.jsx)(ke.a,{className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Birthdate",type:"date",name:"birth_date",value:r.state.birth_date,onChange:r.handleChange})]})},r.handleChange=function(e){r.setState(Object(Oe.a)({},e.target.name,e.target.value))},r.handleSave=Object(P.a)(B.a.mark((function e(){var t,a,n,s,o,i,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state,a=t.username,n=t.birth_date,s=t.gender,o=t.email,i=t.user_id,r.setState({isSaving:!0}),c={username:a,birth_date:n,gender:s,email:o,user_id:i},e.next=5,Q(a,c);case 5:e.sent&&r.setState({isSaving:!1,saved:!0}),r.handleClose();case 8:case"end":return e.stop()}}),e)}))),r.handleOpen=function(){r.setState({isOpen:!0})},r.handleClose=function(){r.setState({isOpen:!1})},r.state={isOpen:!1,isSaving:!1},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if("update"===this.props.mode&&this.props.user){var e=this.props.user.gender;console.log(this.props.user),this.setState(Object(x.a)(Object(x.a)({},this.props.user),{},{gender:Ye[e]||e}))}}},{key:"render",value:function(){return console.log(this.state),Object(n.jsxs)("div",{className:"my-1",children:[Object(n.jsx)(ye.a,{style:this.props.style,onClick:this.handleOpen,children:Object(n.jsx)(b.a,{variant:"body1",children:this.props.text})}),Object(n.jsx)(Ee,{isOpen:this.state.isOpen,isSaving:this.state.isSaving,title:this.props.title,onSave:this.handleSave,onClose:this.handleClose,onOpen:this.handleOpen,children:this.renderForm()})]})}}]),a}(r.Component),Qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).renderForm=function(){return Object(n.jsxs)("div",{className:"flex-column mx-1 px-1",style:{width:"90vw",maxWidth:"400px"},children:[Object(n.jsx)(ke.a,{required:!0,className:"mb-1",name:"goal_book_count",label:"Goal Book Count",type:"number",variant:"outlined",value:r.state.goal_book_count,onChange:r.handleChange}),Object(n.jsx)(ke.a,{required:!0,className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Start Date",type:"date",name:"goal_start_date",value:r.state.goal_start_date,onChange:r.handleChange}),Object(n.jsx)(ke.a,{required:!0,className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Start Date",type:"date",name:"goal_end_date",value:r.state.goal_end_date,onChange:r.handleChange})]})},r.handleChange=function(e){r.setState(Object(Oe.a)({},e.target.name,e.target.value))},r.handleSave=Object(P.a)(B.a.mark((function e(){var t,a,n,s,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state,a=t.username,n=t.goal_book_count,s=t.goal_start_date,o=t.goal_end_date,r.setState({isSaving:!0}),i={goal_book_count:n,goal_start_date:s,goal_end_date:o},e.next=5,F(a,i);case 5:e.sent&&r.setState({isSaving:!1,saved:!0}),r.handleClose();case 8:case"end":return e.stop()}}),e)}))),r.handleOpen=function(){r.setState({isOpen:!0})},r.handleClose=function(){r.setState({isOpen:!1})},r.state={isOpen:!1,isSaving:!1},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){"update"===this.props.mode&&this.props.data&&(console.log(this.props.data),this.setState(Object(x.a)({},this.props.data)))}},{key:"render",value:function(){return console.log(this.state),Object(n.jsxs)("div",{className:"my-1",children:[Object(n.jsx)(ye.a,{style:this.props.style,onClick:this.handleOpen,children:Object(n.jsx)(b.a,{variant:"body1",children:this.props.text})}),Object(n.jsx)(Ee,{isOpen:this.state.isOpen,isSaving:this.state.isSaving,title:this.props.title,onSave:this.handleSave,onClose:this.handleClose,onOpen:this.handleOpen,children:this.renderForm()})]})}}]),a}(r.Component),qe=a(69),Je=function(){var e=Object(P.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/authors/"+t).then((function(e){return e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(P.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/authors/"+t+"/books").then((function(e){return e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(e){return f.a.post("/authors/search",{value:e}).then((function(e){return e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){console.log(e)}))},He=function(e){return console.log(e),f.a.post("/authors/create",{data:e}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))},Ze=function(e,t){return console.log(t),f.a.put("/authors/"+e+"/update",{data:t}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))},ze=function(e){return f.a.post("/books/search",{value:e}).then((function(e){return console.log(e),e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){console.log(e)}))},Ke=function(e){return console.log(e),f.a.post("/books/create",{data:e}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))},Xe=function(e,t){return console.log(t),f.a.put("/books/"+e+"/update",{data:t}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}))},$e=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).renderDeleteConfirmModal=function(){var e=r.state,t=e.isOpen,a=e.isSaving,s=r.props.title;return Object(n.jsxs)(Le.a,{open:t,onClose:r.handleClose,maxWidth:"md",children:[Object(n.jsx)(Me.a,{children:s}),Object(n.jsxs)(Be.a,{children:[Object(n.jsx)(b.a,{className:"mb-1 mx-1",variant:"body1",children:"Are you sure you want to delete this?"}),r.renderItem()]}),Object(n.jsxs)(Pe.a,{children:[Object(n.jsx)(ye.a,{onClick:r.handleDeleteConfirm,color:"secondary",children:a?Object(n.jsx)(Ce,{size:"sm",color:qe.a[500]}):"Delete"}),Object(n.jsx)(ye.a,{onClick:r.handleClose,color:"primary",autoFocus:!0,children:"Cancel"})]})]})},r.renderItem=function(){var e=r.props,t=e.mode,a=e.item,s="book"===t?a.title:"author"===t?a.name:"user"===t?a.username:null,o="book"===t?"Publish date: "+a.publish_date:"author"===t?"From: "+a.birthplace:"user"===t?a.email:null;return Object(n.jsxs)("div",{className:"flex-column ai-center my-1",children:[Object(n.jsx)(b.a,{variant:"h6",children:s}),Object(n.jsx)(b.a,{variant:"body1",children:o})]})},r.handleDeleteConfirm=Object(P.a)(B.a.mark((function e(){var t,a,n,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(r.props),r.setState({isSaving:!0}),t=r.props,a=t.mode,n=t.item,s="book"===a?n.book_id:"author"===a?n.author_id:"user"===a?n.user_id:null,console.log(s),"book"!==a){e.next=11;break}return e.next=8,c=s,console.log(c),f.a.delete("/books/delete",{data:{book_id:c}}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}));case 8:e.t0=e.sent,e.next=26;break;case 11:if("author"!==a){e.next=17;break}return e.next=14,i=s,f.a.delete("/authors/delete",{data:{author_id:i}}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}));case 14:e.t1=e.sent,e.next=25;break;case 17:if("user"!==a){e.next=23;break}return e.next=20,o=s,console.log(o),f.a.delete("/users/delete",{data:{user_id:o}}).then((function(e){return console.log(e),e&&e.data?e.data:null})).catch((function(e){return console.log(e),null}));case 20:e.t2=e.sent,e.next=24;break;case 23:e.t2=null;case 24:e.t1=e.t2;case 25:e.t0=e.t1;case 26:e.t0&&("user"===a?r.props.history.push("/login"):r.props.history.push("/search")),r.handleClose();case 29:case"end":return e.stop()}var o,i,c}),e)}))),r.handleOpen=function(){r.setState({isOpen:!0})},r.handleClose=function(){r.setState({isOpen:!1,isSaving:!1})},r.state={isOpen:!1,isSaving:!1},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.text;return Object(n.jsxs)("div",{className:"my-1",children:[Object(n.jsx)(ye.a,{style:this.props.style,onClick:this.handleOpen,color:"secondary",children:Object(n.jsx)(b.a,{variant:"body1",children:e})}),this.renderDeleteConfirmModal()]})}}]),a}(r.Component),et=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).fetchUserData=Object(P.a)(B.a.mark((function e(){var t,a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getting visited user data..."),t=r.getParams().username,a="There is no such a user. Maybe typo in url?",t!==r.props.user.username||r.state.isUsersOwnProfile){e.next=6;break}return r.setState({isLoading:!1,visitedUser:r.props.user,isUsersOwnProfile:!0}),e.abrupt("return");case 6:return e.next=8,s=t,f.a.get("/users/"+s).then((function(e){return e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){console.log(e)}));case 8:(n=e.sent)||r.setState({error:!0,errorMessage:r.props.errorMessage||a}),r.setState({isLoading:!1,visitedUser:n});case 11:case"end":return e.stop()}var s}),e)}))),r.fetchListsData=Object(P.a)(B.a.mark((function e(){var t,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.getParams().username,e.next=3,Y(t);case 3:(a=e.sent)&&(t===r.props.user.username&&r.props.dispatch(te(a)),r.setState({visitedLists:a}));case 5:case"end":return e.stop()}}),e)}))),r.renderUserInfo=function(){var e=r.state.visitedUser;if(!e)return null;var t=e.username,a=e.email,s=e.gender,o=e.birth_date;return Object(n.jsxs)("div",{className:"flex-column ai-center",children:[Object(n.jsx)(fe,{height:100,src:me,alt:t}),Object(n.jsx)(b.a,{variant:"h4",children:t}),Object(n.jsx)(b.a,{variant:"body1",children:a}),Object(n.jsx)(b.a,{variant:"body1",children:s}),Object(n.jsx)(b.a,{variant:"body1",children:o}),r.state.isUsersOwnProfile?Object(n.jsxs)("div",{children:[Object(n.jsx)(Fe,{mode:"update",user:r.props.user,title:"Edit Author",style:{color:Ie.a[500]},text:"Edit Info"}),Object(n.jsx)($e,{mode:"user",item:r.props.user,title:"Confirm Delete",text:"Delete Your Account",history:r.props.history})]}):null]})},r.renderLists=function(){var e=r.state.isUsersOwnProfile?r.props:r.state.visitedLists,t=e.favorites,a=e.haveRead,s=e.toRead,o=function(e){return e&&e.length>0};return Object(n.jsx)("div",{className:"flex-column ai-center",children:Object(n.jsxs)("div",{className:"ai-fs",children:[Object(n.jsx)(b.a,{variant:"h5",children:"Favorites"}),o(t)?Object(n.jsx)("div",{className:"flex-column ai-fs",children:t.map((function(e){return Object(n.jsx)(b.a,{className:"cursor-pointer",component:Ae.a,color:"inherit",onClick:function(){return r.props.history.push("/books/"+e.book_id)},variant:"body1",children:e.title})}))}):Object(n.jsx)(b.a,{variant:"body2",children:"No books in the list."}),Object(n.jsx)(b.a,{variant:"h5",children:"Wants To Read"}),o(s)?Object(n.jsx)("div",{className:"flex-column ai-fs",children:s.map((function(e){return Object(n.jsx)(b.a,{className:"cursor-pointer",component:Ae.a,color:"inherit",onClick:function(){return r.props.history.push("/books/"+e.book_id)},variant:"body1",children:e.title})}))}):Object(n.jsx)(b.a,{variant:"body2",children:"No books in the list."}),Object(n.jsx)(b.a,{variant:"h5",children:"Have Read"}),o(a)?Object(n.jsx)("div",{className:"flex-column ai-fs",children:a.map((function(e){return Object(n.jsx)(b.a,{className:"cursor-pointer",component:Ae.a,color:"inherit",onClick:function(){return r.props.history.push("/books/"+e.book_id)},variant:"body1",children:e.title})}))}):Object(n.jsx)(b.a,{variant:"body2",children:"No books in the list."})]})})},r.renderGoalInfo=function(){var e=r.state,t=e.visitedUser,a=e.isUsersOwnProfile;if(!t)return null;var s=t.goal_book_count,o=t.goal_start_date,i=t.goal_end_date;return Object(n.jsxs)("div",{className:"flex-column ai-center",children:[Object(n.jsx)(b.a,{variant:"h5",children:"Goals"}),s?Object(n.jsxs)("div",{children:[Object(n.jsxs)(b.a,{variant:"body1",children:["Goal Book Count: ",s]}),Object(n.jsxs)(b.a,{variant:"body1",children:["Goal Start Date: ",o]}),Object(n.jsxs)(b.a,{variant:"body1",children:["Goal End Date: ",i]})]}):Object(n.jsx)(b.a,{variant:"body2",children:"No goals"}),a?Object(n.jsx)(Qe,{mode:"update",data:r.state.visitedUser,title:"Edit Goal",style:{color:Ie.a[500]},text:"Edit Goal"}):null]})},r.handleChange=function(e){r.setState(Object(Oe.a)({},e.target.name,e.target.value))},r.getParams=function(){return r.props.match.params},r.responseReceived=function(){return r.props.isAuthenticated||r.props.error||r.props.user.username},r.state={visitedUser:null,visitedLists:{},error:!1,errorMessage:"",isLoading:!0,isUsersOwnProfile:!1,goalsModalOpen:!1,goalSaving:!1},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("comp did mount props: ",this.props),this.props.isAuthenticated&&(this.fetchUserData(),this.fetchListsData())}},{key:"componentDidUpdate",value:function(e,t){console.log("comp did update"),!e.isAuthenticated&&this.props.isAuthenticated&&(this.fetchUserData(),this.fetchListsData()),t.visitedUser&&t.visitedUser.username!==this.getParams().username&&(this.fetchUserData(),this.fetchListsData())}},{key:"render",value:function(){var e=this.state,t=e.visitedUser,a=e.isLoading,r=(e.isUsersOwnProfile,this.props),s=r.isAuthenticated,o=r.errorMessage;return console.log("visited user: ",t),console.log("visited user lists: ",this.state.visitedLists),console.log(this.state),console.log("props: ",this.props),console.log(this.getParams()),s||a?t||a?Object(n.jsx)("div",{className:"page-container jc-center ai-center",children:a?Object(n.jsx)(Se.a,{color:"primary"}):Object(n.jsxs)(xe.a,{container:!0,spacing:2,direction:"row",children:[Object(n.jsxs)(xe.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:[this.renderUserInfo(),this.renderGoalInfo()]}),Object(n.jsx)(xe.a,{item:!0,xs:12,md:6,children:this.renderLists()})]})}):Object(n.jsx)("div",{className:"page-container jc-center",children:Object(n.jsx)(Ne.a,{severity:"error",children:o||"There is no such user: "+this.getParams().username})}):(console.log("redirect to login"),this.props.history.push("/login"))}}]),a}(r.Component),tt=Object(j.b)(je)(et),at=a.p+"static/media/logo_orange.661ebedf.png",nt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleLoginClick=function(e){n.props.history.push("/login")},n.handleRegisterClick=function(e){n.props.history.push("/register")},n.state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.user;return console.log(this.props),Object(n.jsxs)("div",{className:"page-container jc-center ai-center flex-column",children:[Object(n.jsx)("img",{style:{width:200,height:"auto"},src:at,alt:"ReadHead"}),Object(n.jsx)(b.a,{variant:"h1",children:"Welcome!"}),t&&a?Object(n.jsxs)(b.a,{variant:"h5",children:["Good to see you again, ",a.username]}):Object(n.jsxs)("div",{className:"my-1 flex-column",children:[Object(n.jsx)(ye.a,{className:"my-1",variant:"contained",color:"primary",onClick:this.handleLoginClick,children:"Login"}),Object(n.jsx)(ye.a,{className:"my-1",variant:"contained",color:"primary",onClick:this.handleRegisterClick,children:"Register"})]})]})}}]),a}(r.Component),rt=Object(j.b)((function(e){console.log("home maps to props state: ",e);var t=e.auth;return{isAuthenticated:t.isAuthenticated,error:t.error,errorMessage:t.errorMessage,user:t.user}}))(nt),st=a(182),ot=a(202),it=a(193),ct=a(197),lt=a(180),ut=a(181),ht=a(68),dt=a(192),pt=a(189),bt=a(190),jt=a(191),mt=J,ft=V,vt=W,gt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleIconClick=function(t,a){var n="book"===e.props.mode?e.props.item.book_id:e.props.item.author_id;a?e.props.dispatch(re(e.props.username,n,t)):e.props.dispatch(ne(e.props.username,n,t))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dispatch,a=this.props,r=a.mode,s=a.item,o=a.username,i=a.isRead,c=a.isWanted,l=a.isFavorite,u=a.icons;return Object(n.jsxs)(lt.a,{elevation:3,className:"flex-row mb-1 px-1 py-1 jc-sb ai-fs cursor-pointer",children:["book"===r?Object(n.jsxs)("div",{className:"flex-column",style:{width:"70%"},children:[Object(n.jsx)(b.a,{component:Ae.a,color:"inherit",onClick:function(){return e.props.history.push("/books/"+s.book_id)},variant:"h5",children:s.title}),Object(n.jsx)(b.a,{component:Ae.a,color:"inherit",onClick:function(){return e.props.history.push("/authors/"+s.author_id)},variant:"subtitle1",children:s.name}),Object(n.jsxs)(b.a,{variant:"subtitle2",children:[s.publish_date," - ",s.pages," pages"]})]},s.book_id+"_info"):Object(n.jsx)("div",{className:"flex-column",style:{width:"70%"},children:Object(n.jsx)(b.a,{component:Ae.a,color:"inherit",onClick:function(){return e.props.history.push("/authors/"+s.author_id)},variant:"h5",children:s.name})}),u?Object(n.jsxs)("div",{className:"flex-row",style:{width:"30%"},children:[Object(n.jsx)(ut.a,{onClick:function(){return t(i?re(o,s.book_id,ft):ne(o,s.book_id,ft))},children:Object(n.jsxs)("div",{className:"flex-column ai-center",children:[Object(n.jsx)(pt.a,{style:{color:i?Ie.a[500]:ht.a[500]}}),Object(n.jsx)(b.a,{variant:"subtitle2",children:"Read"})]})},s.book_id+"_icons_read"),Object(n.jsx)(ut.a,{onClick:function(){return t(c?re(o,s.book_id,vt):ne(o,s.book_id,vt))},children:Object(n.jsxs)("div",{className:"flex-column ai-center",children:[Object(n.jsx)(bt.a,{style:{color:c?qe.a[500]:ht.a[500]}}),Object(n.jsx)(b.a,{variant:"subtitle2",children:"Want To"})]})},s.book_id+"_icons_wanted"),Object(n.jsx)(ut.a,{onClick:function(){return e.handleIconClick(mt,l)},children:Object(n.jsxs)("div",{className:"flex-column ai-center",children:[Object(n.jsx)(jt.a,{style:{color:l?dt.a[500]:ht.a[500]}}),Object(n.jsx)(b.a,{variant:"subtitle2",children:"Favorite"})]})},s.book_id+"_icons_fav")]},s.book_id+"_icons"):null]},s.book_id)}}]),a}(r.PureComponent),Ot=Object(j.b)(null)(gt),xt=a(196),kt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).renderForm=function(){return Object(n.jsxs)("div",{className:"flex-column mx-1 px-1",style:{width:"90vw",maxWidth:"400px"},children:[Object(n.jsx)(ke.a,{className:"mb-1",name:"title",label:"Book Title",type:"text",variant:"outlined",value:r.state.title,onChange:r.handleChange}),Object(n.jsx)(xt.a,{value:r.state.author,onChange:function(e,t){return r.setState({author:t})},inputValue:r.state.authorInput,onInputChange:function(e,t){return r.handleAuthorInputChange(t)},options:r.state.authorResults,getOptionLabel:function(e){return e.name},style:{width:"300"},renderInput:function(e){return Object(n.jsx)(ke.a,Object(x.a)(Object(x.a)({},e),{},{label:"Author",placeholder:"start typing name...",type:"text",variant:"outlined"}))}}),Object(n.jsx)(ke.a,{className:"mb-1",variant:"outlined",label:"Pages",type:"number",name:"pages",value:r.state.pages,onChange:r.handleChange}),Object(n.jsx)(ke.a,{required:!0,className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Publish Date",type:"date",name:"publish_date",value:r.state.publish_date,onChange:r.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",name:"publish_place",label:"Publish Place",type:"text",variant:"outlined",value:r.state.publish_place,onChange:r.handleChange}),Object(n.jsx)(ke.a,{className:"mb-1",name:"publisher",label:"Publisher",type:"text",variant:"outlined",value:r.state.publisher,onChange:r.handleChange})]})},r.searchAuthors=function(){var e=Object(P.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length<4&&r.setState({authorResults:[]}),e.next=3,We(t);case 3:(a=e.sent)&&r.setState({authorResults:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleAuthorInputChange=function(e){r.setState({authorInput:e}),r.searchAuthors(e)},r.handleChange=function(e){r.setState(Object(Oe.a)({},e.target.name,e.target.value))},r.handleSave=Object(P.a)(B.a.mark((function e(){var t,a,n,s,o,i,c,l,u,h,d,p;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,a=t.title,n=t.publish_date,s=t.pages,o=t.book_id,i=t.author_id,c=t.author,l=t.publish_place,u=t.publisher,h=r.props.mode,r.setState({isSaving:!0}),d={title:a,publish_date:n,pages:s,publish_place:l,publisher:u},i!==c.author_id&&(d=Object(x.a)(Object(x.a)({},d),{},{author_id:c.author_id})),"update"!==h){e.next=11;break}return e.next=8,Xe(o,d);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Ke(d);case 13:e.t0=e.sent;case 14:p=e.t0,console.log(p),p&&p.status&&(r.setState({saved:!0}),"create"===h&&p.book_id&&r.props.history.push("/books/"+p.book_id)),r.handleClose();case 18:case"end":return e.stop()}}),e)}))),r.handleOpen=function(){r.setState({isOpen:!0})},r.handleClose=function(){r.setState({isOpen:!1})},r.state={isOpen:!1,isSaving:!1,authorInput:"",authorResults:[],author:null},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(console.log(this.props.book),"update"===this.props.mode&&this.props.book){var e=this.props.book,t=e.author_id,a=e.name;this.setState(Object(x.a)(Object(x.a)({},this.props.book),{},{author:{author_id:t,name:a}}))}}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"my-1",children:[Object(n.jsx)(ye.a,{style:this.props.style,onClick:this.handleOpen,children:Object(n.jsx)(b.a,{variant:"body1",children:this.props.text})}),Object(n.jsx)(Ee,{isOpen:this.state.isOpen,isSaving:this.state.isSaving,title:this.props.title,onSave:this.handleSave,onClose:this.handleClose,onOpen:this.handleOpen,children:this.renderForm()})]})}}]),a}(r.Component),yt=["Male","Female"],At={M:"Male",F:"Female"},Nt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).fetchBirthPlaces=Object(P.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a="",f.a.post("/birthplaces/search",{value:a}).then((function(e){return e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){console.log(e)}));case 2:(t=e.sent)&&r.setState({bpResults:t});case 4:case"end":return e.stop()}var a}),e)}))),r.renderForm=function(){return Object(n.jsxs)("div",{className:"flex-column mx-1 px-1",style:{width:"90vw",maxWidth:"400px"},children:[Object(n.jsx)(ke.a,{required:!0,className:"mb-1",name:"name",label:"Author Name",type:"text",variant:"outlined",value:r.state.name,onChange:r.handleChange}),Object(n.jsx)(xt.a,{value:r.state.birthPlace,onChange:function(e,t){return r.setState({birthPlace:t})},inputValue:r.state.bpInput,onInputChange:function(e,t){return r.setState({bpInput:t})},options:r.state.bpResults,getOptionLabel:function(e){return e.birthplace},style:{width:"300"},renderInput:function(e){return Object(n.jsx)(ke.a,Object(x.a)(Object(x.a)({},e),{},{label:"Birth Place",type:"text",variant:"outlined"}))}}),Object(n.jsx)(ke.a,{className:"mb-1",select:!0,variant:"outlined",label:"Gender",type:"text",name:"gender",value:r.state.gender,onChange:r.handleChange,children:yt.map((function(e){return Object(n.jsx)(_e.a,{value:e,children:e},e)}))}),Object(n.jsx)(ke.a,{required:!0,className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Birth Date",type:"date",name:"birth_date",value:r.state.birth_date,onChange:r.handleChange}),Object(n.jsx)(ke.a,{required:!0,className:"mb-1",InputLabelProps:{shrink:!0},variant:"outlined",label:"Death Date",type:"date",name:"death_date",value:r.state.death_date,onChange:r.handleChange})]})},r.renderBirthPlaces=function(){r.state.bpResults},r.handleChange=function(e){r.setState(Object(Oe.a)({},e.target.name,e.target.value))},r.handleSave=Object(P.a)(B.a.mark((function e(){var t,a,n,s,o,i,c,l,u,h;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,a=t.name,n=t.birth_date,s=t.death_date,o=t.gender,i=t.author_id,c=r.state.birthPlace.birthplace_id,l=r.props.mode,r.setState({isSaving:!0}),u={name:a,birthplace_id:c,birth_date:n,death_date:s,gender:o},"update"!==l){e.next=11;break}return e.next=8,Ze(i,u);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,He(u);case 13:e.t0=e.sent;case 14:h=e.t0,console.log(h),h&&h.status&&(r.setState({saved:!0}),"create"===l&&h.author_id&&r.props.history.push("/authors/"+h.author_id)),r.handleClose();case 18:case"end":return e.stop()}}),e)}))),r.handleOpen=function(){r.setState({isOpen:!0})},r.handleClose=function(){r.setState({isOpen:!1,isSaving:!1})},r.state={isOpen:!1,isSaving:!1,bpInput:"",bpResults:[],birthPlace:null,gender:"",name:"",birth_date:null,death_date:null,author_id:null},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if("update"===this.props.mode&&this.props.author){var e=this.props.author,t=e.birthplace,a=e.birthplace_id,n=e.gender;this.setState(Object(x.a)(Object(x.a)({},this.props.author),{},{birthPlace:{birthplace:t,birthplace_id:a},gender:At[n]||n}))}}},{key:"componentDidUpdate",value:function(e,t){!t.isOpen&&this.state.isOpen&&this.fetchBirthPlaces()}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"my-1",children:[Object(n.jsx)(ye.a,{style:this.props.style,onClick:this.handleOpen,children:Object(n.jsx)(b.a,{variant:"body1",children:this.props.text})}),Object(n.jsx)(Ee,{isOpen:this.state.isOpen,isSaving:this.state.isSaving,title:this.props.title,onSave:this.handleSave,onClose:this.handleClose,onOpen:this.handleOpen,children:this.renderForm()})]})}}]),a}(r.Component),St={books:"start typing a title...",authors:"start typing an author's name"},Ct=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).fetchLists=Object(P.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(r.props.user.username);case 2:(t=e.sent)&&r.props.dispatch(te(t));case 4:case"end":return e.stop()}}),e)}))),r.renderResults=function(){if(r.state.results&&!(r.state.results.length<1)){console.log(r.state.results);var e=r.props.user.username,t=r.state.searchMode;return console.log(t),Object(n.jsx)("div",{className:"my-1 flex-column",style:{width:"80%"},children:"books"===t?r.state.results.map((function(t){var a=r.props.favorites.some((function(e){return e.book_id===t.book_id})),s=r.props.haveRead.some((function(e){return e.book_id===t.book_id})),o=r.props.toRead.some((function(e){return e.book_id===t.book_id}));return Object(n.jsx)(Ot,{mode:"book",username:e,isRead:s,isFavorite:a,isWanted:o,item:t,history:r.props.history,icons:!0})})):"authors"===t?r.state.results.map((function(t){return Object(n.jsx)(Ot,{mode:"author",item:t,username:e,history:r.props.history,icons:!1})})):null})}},r.renderAddItem=function(){if(!(r.state.search.length>3))return null;var e="Couldn't find? Add another one instead!";return"books"===r.state.searchMode?Object(n.jsx)(kt,{history:r.props.history,mode:"create",title:"Add Book",style:{color:Ie.a[500]},text:e}):"authors"===r.state.searchMode?Object(n.jsx)(Nt,{history:r.props.history,mode:"create",title:"Add Author",style:{color:Ie.a[500]},text:e}):null},r.handleSearchModeChange=function(e){console.log(e),r.setState({searchMode:e,results:[],search:""})},r.handleSearchChange=function(e){r.setState({search:e}),r.fetchResults(e)},r.fetchResults=function(){var e=Object(P.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.trim().length<5)){e.next=3;break}return r.setState({results:[]}),e.abrupt("return");case 3:if("books"!==r.state.searchMode){e.next=9;break}return e.next=6,ze(t.trim());case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,We(t.trim());case 11:e.t0=e.sent;case 12:(a=e.t0)||r.setState({error:!0,errorMessage:"An error happened. Please try again later.",results:[]}),r.setState({results:a});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={search:"",results:[],searchMode:"books"},r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){!e.user.username&&this.props.user.username&&this.props.isAuthenticated&&this.fetchLists()}},{key:"render",value:function(){var e=this,t=this.props.isAuthenticated,a=this.state.searchMode;return t||this.props.history.push("/login"),Object(n.jsxs)("div",{className:"page-container ai-center flex-column",children:[t?null:"Oooppss! You were never here...",Object(n.jsx)("div",{children:Object(n.jsx)(b.a,{variant:"h3",className:"mb-1",children:"Search"})}),Object(n.jsx)(ke.a,{style:{width:"80%"},className:"mb-1",variant:"outlined",label:"Search",type:"Search Books",placeholder:St[a],value:this.state.search,onChange:function(t){return e.handleSearchChange(t.target.value)}}),Object(n.jsx)(st.a,{component:"fieldset",children:Object(n.jsxs)(ot.a,{row:!0,name:"searchModeSelect",value:a,onChange:function(t){return e.handleSearchModeChange(t.target.value)},children:[Object(n.jsx)(it.a,{value:"books",control:Object(n.jsx)(ct.a,{color:"primary"}),label:"Books"}),Object(n.jsx)(it.a,{value:"authors",control:Object(n.jsx)(ct.a,{color:"primary"}),label:"Authors"})]})}),this.renderAddItem(),this.renderResults()]})}}]),a}(r.Component),wt=Object(j.b)(je)(Ct),Dt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).fetchBookData=Object(P.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=r.getParams().bookId,f.a.get("books/"+a).then((function(e){return e&&e.data&&e.data.status?e.data.data:null})).catch((function(e){return console.log(e)}));case 2:(t=e.sent)?r.setState({book:t,isLoading:!1}):r.setState({isLoading:!1,error:!0,errorMessage:"An error occured."});case 4:case"end":return e.stop()}var a}),e)}))),r.renderBook=function(){if(!r.state.book)return null;var e=r.state.book,t=e.book_id,a=e.title,s=e.publish_date,o=e.pages,i=e.name,c=e.author_id,l=e.publish_place,u=e.publisher;return Object(n.jsxs)("div",{children:[Object(n.jsx)(b.a,{variant:"h3",children:a}),Object(n.jsxs)(b.a,{className:"cursor-pointer",component:Ae.a,color:"inherit",onClick:function(){return r.props.history.push("/authors/"+c)},variant:"h4",children:["By ",i]}),Object(n.jsxs)(b.a,{variant:"h5",children:[o," pages"]}),Object(n.jsxs)(b.a,{variant:"h6",children:["Published at: ",s," ",l]}),Object(n.jsxs)(b.a,{variant:"h6",children:["Publisher: ",u||"unknown"]}),Object(n.jsx)(kt,{mode:"update",book:r.state.book,title:"Edit Book",style:{color:Ie.a[500]},text:"Edit Book"}),Object(n.jsx)("hr",{}),Object(n.jsx)($e,{mode:"book",item:r.state.book,title:"Confirm Delete",text:"Delete This Book",history:r.props.history})]},t)},r.getParams=function(){return console.log(r.props.match.params),r.props.match.params},r.state={isLoading:!0,book:null},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),this.fetchBookData()}},{key:"render",value:function(){var e=this.state,t=e.book,a=e.isLoading;e.error,e.errorMessage,this.props.isAuthenticated;return console.log(t),Object(n.jsxs)("div",{className:"page-container jc-center ai-center",children:[a?Object(n.jsx)("div",{className:"page-container jc-center ai-center",children:Object(n.jsx)(Se.a,{color:"primary"})}):null,t||a?Object(n.jsx)("div",{children:this.renderBook()}):Object(n.jsx)(Ne.a,{severity:"error",children:"Could not find book."})]})}}]),a}(r.Component),_t=a(194),Rt={M:"Male",F:"Female"},Gt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).fetchAuthorData=Object(P.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(r.getParams().authorId);case 2:(t=e.sent)?r.setState({author:t,isLoading:!1}):r.setState({isLoading:!1,error:!0,errorMessage:"An error occured."});case 4:case"end":return e.stop()}}),e)}))),r.fetchAuthorBooks=Object(P.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(r.getParams().authorId);case 2:(t=e.sent)?r.setState({books:t,isLoading:!1}):r.setState({isLoading:!1,error:!0,errorMessage:"An error occured."});case 4:case"end":return e.stop()}}),e)}))),r.renderAuthor=function(){if(!r.state.author)return null;var e=r.state.author,t=(e.author_id,e.name),a=e.birthplace,s=e.gender,o=e.birth_date,i=e.death_date;return Object(n.jsxs)(xe.a,{item:!0,xs:12,md:6,children:[Object(n.jsx)(b.a,{variant:"h3",children:t}),Object(n.jsxs)(b.a,{variant:"h4",children:["Born in ",a]}),Object(n.jsx)(b.a,{variant:"h5",children:Rt[s.trim()]||s.trim()}),Object(n.jsxs)(b.a,{variant:"h6",children:["Birth Date: ",o||"unknown"]}),Object(n.jsxs)(b.a,{variant:"h6",children:["Death Date: ",i||"unknown"]}),Object(n.jsx)(Nt,{mode:"update",author:r.state.author,title:"Edit Author",style:{color:Ie.a[500]},text:"Edit Author"}),Object(n.jsx)("hr",{}),Object(n.jsx)($e,{mode:"author",item:r.state.author,title:"Confirm Delete",text:"Delete This Author",history:r.props.history})]})},r.renderBooks=function(){if(r.state.author){var e,t=r.state.books;return Object(n.jsxs)(xe.a,{item:!0,xs:12,md:6,children:[Object(n.jsxs)(b.a,{variant:"h4",children:["Books of ",r.state.author.name]}),Object(n.jsx)("hr",{}),t&&(e=t,e.length>0)?t.map((function(e,a){return Object(n.jsxs)("div",{children:[Object(n.jsx)(b.a,{className:"cursor-pointer",component:Ae.a,color:"inherit",onClick:function(){return r.props.history.push("/books/"+e.book_id)},variant:"h5",children:e.title}),Object(n.jsxs)(b.a,{variant:"h6",children:[e.pages," pages"]}),Object(n.jsxs)(b.a,{variant:"h6",children:["Published at: ",e.publish_date]}),a<t.length-1?Object(n.jsx)(_t.a,{}):null]},e.book_id)})):"This author has no books."]})}},r.getParams=function(){return console.log(r.props.match.params),r.props.match.params},r.state={isLoading:!0,author:null,books:null},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),this.fetchAuthorData(),this.fetchAuthorBooks()}},{key:"render",value:function(){var e=this.state,t=e.author,a=e.isLoading;e.error,e.errorMessage,this.props.isAuthenticated;return console.log(t),Object(n.jsxs)("div",{className:"page-container jc-center ai-center",children:[a?Object(n.jsx)("div",{className:"page-container jc-center ai-center",children:Object(n.jsx)(Se.a,{color:"primary"})}):null,t||a?Object(n.jsxs)(xe.a,{container:!0,spacing:5,className:"mx-1",children:[this.renderAuthor(),this.renderBooks()]}):Object(n.jsx)(Ne.a,{severity:"error",children:"Could not find author."})]})}}]),a}(r.Component),Tt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("readhead-jwtToken")||null;console.log("app.js local storage token: ",e),e?(console.log("try login via token app js"),this.props.dispatch(_(null,null,e))):this.props.dispatch(G())}},{key:"render",value:function(){return console.log("app.js props",this.props),Object(n.jsx)(h.a,{children:Object(n.jsxs)("div",{className:"app-container",children:[Object(n.jsx)(d.a,{path:"/",component:ge}),Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{exact:!0,path:"/",component:rt}),Object(n.jsx)(d.a,{exact:!0,path:"/register",component:Te}),Object(n.jsx)(d.a,{exact:!0,path:"/login",component:De}),Object(n.jsx)(d.a,{exact:!0,path:"/users/:username",component:tt}),Object(n.jsx)(d.a,{exact:!0,path:"/search",component:wt}),Object(n.jsx)(d.a,{exact:!0,path:"/books/:bookId",component:Dt}),Object(n.jsx)(d.a,{exact:!0,path:"/authors/:authorId",component:Gt})]})]})})}}]),a}(r.Component),Lt=Object(j.b)(null)(Tt),Mt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,204)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),s(e),o(e)}))};function Bt(){return(Bt=Object(P.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.defaults.baseURL="https://readhead.herokuapp.com/api",t=window.localStorage.getItem("readhead-jwtToken"),console.log("initApp local storage token: ",t),t&&be(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){Bt.apply(this,arguments)}(),o.a.render(Object(n.jsx)(j.a,{store:pe,children:Object(n.jsx)(Lt,{})}),document.getElementById("root")),Mt()}},[[142,1,2]]]);
//# sourceMappingURL=main.247faf25.chunk.js.map